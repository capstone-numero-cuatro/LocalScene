<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Posts</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <style>
        .post-card {
            margin-bottom: 20px;
            padding: 20px;
            background-color: #f5f5f5;
            display: flex;
            align-items: center;
        }

        .post-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .post-body {
            margin-bottom: 10px;
        }

        .post-image {
            flex-shrink: 0;
            width: 150px;
            height: 150px;
            margin-left: 20px;
        }
    </style>
</head>
<body>

<nav th:insert="partials/navbar :: navbar"></nav>

<h1>Posts</h1>
<!--<div>-->
<!--    <div class="container" id="blog-post">-->
<!--        <dialog id="postCreation">-->
<!--            <h5>Create a new post</h5>-->
<!--            <form method="post" action="/posts/create">-->
<!--                <div class="mb-3">-->
<!--                    <label for="BlogTitle" class="form-label">Title</label>-->
<!--                    <input type="text" class="form-control" id="BlogTitle" name="title" placeholder="Title">-->
<!--                </div>-->
<!--    -->
<!--                <div class="mb-3">-->
<!--                    <label for="BlogTextArea" class="form-label">Post Body</label>-->
<!--                    <textarea class="form-control" id="BlogTextArea" name="content" rows="3"></textarea>-->
<!--                </div>-->
<!--                <button type="submit" class="btn btn-primary">Submit!</button>-->
<!--            </form>-->
<!--        </dialog>-->
<!--        <button onclick="document.getElementById('postCreation').showModal()" type="button" class="btn btn-info">Create New Post</button>-->
<!--    </div>-->
<!--</div>-->

<div class="container" id="recent-activity" style="border: solid yellow 2px">
    <div><h4>Recent Activity Placeholder</h4>
<!--        Below here - we need ot start with "IF THERE ARE POSTS" then render POSTS-->
        <div th:each="post : ${posts}">
            <div class="card" style="width: 18rem">
                <div class="card-body">
                    <h5 class="card-title" th:text="${post.title}"></h5>
                    <h6 class="card-body" th:text="${post.description}"></h6>
                    <img th:src="@{'/images/' + ${post.postImage}}" alt="postImage" src="">
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    // Handle form submission
    let form = document.querySelector("form");
    form.addEventListener("submit", function(event) {
        event.preventDefault();


        let titleInput = document.getElementById("BlogTitle");
        let bodyInput = document.getElementById("BlogTextArea");
        let title = titleInput.value;
        let body = bodyInput.value;


        createPostCard(title, body);


        titleInput.value = "";
        bodyInput.value = "";
    });

    function createPostCard(title, body) {

        let cardDiv = document.createElement("div");
        cardDiv.classList.add("card", "post-card");
        let imageElement = document.createElement("img");
        imageElement.classList.add("post-image");
        imageElement.src = "path/to/image.jpg"; // Set the image source
        imageElement.alt = "Image Alt Text"; // Set the image alt text
        let cardBodyDiv = document.createElement("div");
        cardBodyDiv.classList.add("card-body");
        let titleElement = document.createElement("h2");
        titleElement.classList.add("card-title");
        titleElement.textContent = title;
        let bodyElement = document.createElement("p");
        bodyElement.classList.add("card-text");
        bodyElement.textContent = body;


        cardBodyDiv.appendChild(titleElement);
        cardBodyDiv.appendChild(bodyElement);
        cardDiv.appendChild(imageElement);
        cardDiv.appendChild(cardBodyDiv);


        let container = document.querySelector(".container");
        let row = container.querySelector(".row");

        // Check if the row exists, if not, create a new row
        if (!row) {
            row = document.createElement("div");
            row.classList.add("row");
            container.appendChild(row);
        }

        // Check if the row is already full (3 cards), if so, create a new row
        if (row.children.length === 3) {
            row = document.createElement("div");
            row.classList.add("row");
            container.appendChild(row);
        }

        // Create column and append card
        let colDiv = document.createElement("div");
        colDiv.classList.add("col-md-4");
        colDiv.appendChild(cardDiv);
        row.appendChild(colDiv);
    }
</script>
</body>
</html>



