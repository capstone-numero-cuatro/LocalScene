<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <title>Sign-up</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <link rel="stylesheet" th:href="@{/css/navbar.css}">
  <link rel="stylesheet" th:href="@{/css/sign-up.css}">

  <!---googlefonts-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&family=Slackside+One&display=swap" rel="stylesheet">

  <script src="https://kit.fontawesome.com/3d0b015fdb.js" crossorigin="anonymous"></script>


</head>
<body>
<nav th:insert="partials/navbar :: navbar" class="custom-navbar"></nav>


<div>
  <div>
    <div class="container">
      <div class="screen">
          <div class="screen-content">
            <form action="#" th:action="@{/sign-up}" th:object="${user}" method="post">
              <label for="username">Username</label>
              <input id="username" th:field="*{username}" />

              <label for="email">Email</label>
              <input id="email" th:field="*{email}" />

              <label for="password">Password</label>
              <input id="password" type="password" th:field="*{password}" />

              <label for="confirmPassword">Confirm Password</label>
              <input id="confirmPassword" type="password" />

              <label for="profileImageInput" class="custom-file-upload">
                Choose your profile image
              </label>
              <input type="file" id="profileImageInput" style="display: none;"/>
              <img src="" alt="image" id="profileImage" style="background-color: darkgrey; color:white; padding:5px; border:none;outline:none; height: 30vh; width: auto">
              <input type="hidden" id="profileImageUrl" name="profileImage">

              <input value="Sign me up!" type="submit" />
            </form>
          </div>
          <div class="screen__background">
            <span class="screen__background__shape screen__background__shape4"></span>
            <span class="screen__background__shape screen__background__shape3"></span>
            <span class="screen__background__shape screen__background__shape2"></span>
            <span class="screen__background__shape screen__background__shape1"></span>
          </div>
      </div>
    </div>
  </div>
</div>





<!-- Include the Filestack JS library -->
<script src="https://static.filestackapi.com/filestack-js/3.x.x/filestack.min.js"></script>

<script th:inline="javascript">
  /*<![CDATA[*/
  var filestackKey = /*[[${filestackKey}]]*/ 'default';
  /*]]>*/
</script>

<script>
  const client = filestack.init(filestackKey);
  const profilePic = document.getElementById("profileImage");
  const profileFileInput = document.getElementById("profileImageInput");
  const profileImageUrlInput = document.getElementById("profileImageUrl");

  profileFileInput.addEventListener("change", (event) => {
    const file = event.target.files[0];

    client.upload(file).then((response) => {
      profilePic.src = response.url;
      profileImageUrlInput.value = response.url;
    }).catch((error) => {
      console.log(error);
    });
  });
</script>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
</html>

